= ノードに含まれる複雑なデータを排除する
:type: quiz
:order: 6
:updated-at: 2022-04-25 T 21:00:00 Z

[.video]
video::M-C36v-ayJg[youtube,width=560,height=315]

[.transcript]
== 例: 複雑なデータ

ノードは特定のエンティティに関するデータを格納するために使用されるので、例えば、制作会社の住所の詳細を格納するために、最初は _Production_ ノードをモデル化したかもしれません。

image::images/complex-data-in-nodes.png[Complex data in nodes,width=400,align=center]

このように複雑なデータをノードに保存することは、いくつかの理由から有益でない場合があります:

. データが重複している状態。多くのノードで特定の場所に制作会社があり、そのデータが繰り返されることがあります。
. ノードの情報に関連するクエリーは、すべてのノードを検索する必要がある。

=== 複雑なデータのリファクタリング

ノードに重複するデータが多い場合や、複雑なデータを取得するためにすべてのノードを取得する必要がない場合、ユースケースの重要な質問のパフォーマンスが向上する場合、ここに示すようにグラフのリファクタリングを検討することができます。

image::images/add-nodes-for-complex-data.png[Complex data their own nodes,width=400,align=center]

このリファクタリングでは、制作会社を州（State）によってフィルタリングする必要があるクエリがある場合、_Production_ ノードの _state_ プロパティをすべて評価するのではなく、_State.name_ 値に基づいてクエリを実行する方が高速になります。

複雑なデータを扱うためにグラフをどのようにリファクタリングするかは、グラフがスケールしたときのクエリの性能に依存します。

== 理解度チェック


include::questions/1-complex-data.adoc[leveloffset=+1]

[.summary]
== まとめ

このレッスンでは、重複を排除し、クエリのパフォーマンスを向上させるために、複雑なデータをモデル化することが重要である理由を学びました。
次のモジュールでは、特定のリレーションシップを作成するためのリファクタリングについて学びます。